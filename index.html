<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ChatGPT Demo</title>
</head>
<body>
    <h1>ChatGPT Demo</h1>
    <div id="chat-box" style="height: 200px; overflow: scroll;"></div>
    <input id="input-box" type="text" placeholder="Type your message here...">
    <button id="submit-button">Send</button>
    <script src="https://cdn.jsdelivr.net/npm/@openai/chat-alpha-client@0.2.2-alpha.1/dist/browser.js"></script>
    <script>
        const chatClient = new window.OpenAIChatAPIClient({
            model: 'text-davinci-002',
            api_key: process.env.openai_api_key
        });
        const chatBox = document.getElementById('chat-box');
        const inputBox = document.getElementById('input-box');
        const submitButton = document.getElementById('submit-button');

        chatBox.innerText = 'ChatGPT: Welcome to the ChatGPT Demo!';

        function handleButtonClick() {
            const userInput = inputBox.value.trim();
            if (!userInput) {
                return;
            }
            chatBox.innerHTML += `<br>User: ${userInput}`;
            inputBox.value = '';
            const response = await chatClient.sendMessage(userInput);
            chatBox.innerHTML += `<br>ChatGPT: ${response}`;
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        submitButton.addEventListener('click', handleButtonClick);
        inputBox.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                handleButtonClick();
            }
        });
    </script>
</body>
</html>

